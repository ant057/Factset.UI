{"version":3,"sources":["core/ripple/ripple.ts"],"names":[],"mappings":"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","file":"core/ripple/ripple.js","sourcesContent":["import {\n  NgModule,\n  ModuleWithProviders,\n  Directive,\n  ElementRef,\n  HostBinding,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  SimpleChange,\n} from '@angular/core';\nimport {\n  RippleRenderer,\n  ForegroundRipple,\n  ForegroundRippleState,\n} from './ripple-renderer';\n\n\n@Directive({\n  selector: '[md-ripple]',\n})\nexport class MdRipple implements OnInit, OnDestroy, OnChanges {\n  /**\n   * The element that triggers the ripple when click events are received. Defaults to the\n   * directive's host element.\n   */\n  // Prevent TS metadata emit from referencing HTMLElement in ripple.js\n  // That breaks tests running in node that load material components.\n  @Input('md-ripple-trigger') trigger: HTMLElement|HTMLElement;\n  /**\n   * Whether the ripple always originates from the center of the host element's bounds, rather\n   * than originating from the location of the click event.\n   */\n  @Input('md-ripple-centered') centered: boolean;\n  /**\n   * Whether click events will not trigger the ripple. It can still be triggered by manually\n   * calling start() and end().\n   */\n  @Input('md-ripple-disabled') disabled: boolean;\n  /**\n   * If set, the radius in pixels of foreground ripples when fully expanded. If unset, the radius\n   * will be the distance from the center of the ripple to the furthest corner of the host element's\n   * bounding rectangle.\n   */\n  @Input('md-ripple-max-radius') maxRadius: number = 0;\n  /**\n   * If set, the normal duration of ripple animations is divided by this value. For example,\n   * setting it to 0.5 will cause the animations to take twice as long.\n   */\n  @Input('md-ripple-speed-factor') speedFactor: number = 1;\n  /** Custom color for ripples. */\n  @Input('md-ripple-color') color: string;\n  /** Custom color for the ripple background. */\n  @Input('md-ripple-background-color') backgroundColor: string;\n\n  /** Whether the ripple background will be highlighted to indicated a focused state. */\n  @HostBinding('class.md-ripple-focused') @Input('md-ripple-focused') focused: boolean;\n  /** Whether foreground ripples should be visible outside the component's bounds. */\n  @HostBinding('class.md-ripple-unbounded') @Input('md-ripple-unbounded') unbounded: boolean;\n\n  private _rippleRenderer: RippleRenderer;\n\n  constructor(_elementRef: ElementRef) {\n    // These event handlers are attached to the element that triggers the ripple animations.\n    const eventHandlers = new Map<string, (e: Event) => void>();\n    eventHandlers.set('mousedown', (event: MouseEvent) => this._mouseDown(event));\n    eventHandlers.set('click', (event: MouseEvent) => this._click(event));\n    eventHandlers.set('mouseleave', (event: MouseEvent) => this._mouseLeave(event));\n    this._rippleRenderer = new RippleRenderer(_elementRef, eventHandlers);\n  }\n\n  /** TODO: internal */\n  ngOnInit() {\n    // If no trigger element was explicity set, use the host element\n    if (!this.trigger) {\n      this._rippleRenderer.setTriggerElementToHost();\n    }\n  }\n\n  /** TODO: internal */\n  ngOnDestroy() {\n    // Remove event listeners on the trigger element.\n    this._rippleRenderer.clearTriggerElement();\n  }\n\n  /** TODO: internal */\n  ngOnChanges(changes: { [propertyName: string]: SimpleChange }) {\n    // If the trigger element changed (or is being initially set), add event listeners to it.\n    const changedInputs = Object.keys(changes);\n    if (changedInputs.indexOf('trigger') !== -1) {\n      this._rippleRenderer.setTriggerElement(this.trigger);\n    }\n  }\n\n  /**\n   * Responds to the start of a ripple animation trigger by fading the background in.\n   */\n  start() {\n    this._rippleRenderer.fadeInRippleBackground(this.backgroundColor);\n  }\n\n  /**\n   * Responds to the end of a ripple animation trigger by fading the background out, and creating a\n   * foreground ripple that expands from the event location (or from the center of the element if\n   * the \"centered\" property is set or forceCenter is true).\n   */\n  end(left: number, top: number, forceCenter = true) {\n    this._rippleRenderer.createForegroundRipple(\n      left,\n      top,\n      this.color,\n      this.centered || forceCenter,\n      this.maxRadius,\n      this.speedFactor,\n      (ripple: ForegroundRipple, e: TransitionEvent) => this._rippleTransitionEnded(ripple, e));\n    this._rippleRenderer.fadeOutRippleBackground();\n  }\n\n  private _rippleTransitionEnded(ripple: ForegroundRipple, event: TransitionEvent) {\n    if (event.propertyName === 'opacity') {\n      // If the ripple finished expanding, start fading it out. If it finished fading out,\n      // remove it from the DOM.\n      switch (ripple.state) {\n        case ForegroundRippleState.EXPANDING:\n          this._rippleRenderer.fadeOutForegroundRipple(ripple.rippleElement);\n          ripple.state = ForegroundRippleState.FADING_OUT;\n          break;\n        case ForegroundRippleState.FADING_OUT:\n          this._rippleRenderer.removeRippleFromDom(ripple.rippleElement);\n          break;\n      }\n    }\n  }\n\n  /**\n   * Called when the trigger element receives a mousedown event. Starts the ripple animation by\n   * fading in the background.\n   */\n  private _mouseDown(event: MouseEvent) {\n    if (!this.disabled && event.button === 0) {\n      this.start();\n    }\n  }\n\n  /**\n   * Called when the trigger element receives a click event. Creates a foreground ripple and\n   * runs its animation.\n   */\n  private _click(event: MouseEvent) {\n    if (!this.disabled && event.button === 0) {\n      // If screen and page positions are all 0, this was probably triggered by a keypress.\n      // In that case, use the center of the bounding rect as the ripple origin.\n      // FIXME: This fails on IE11, which still sets pageX/Y and screenX/Y on keyboard clicks.\n      const isKeyEvent =\n          (event.screenX === 0 && event.screenY === 0 && event.pageX === 0 && event.pageY === 0);\n      this.end(event.pageX, event.pageY, isKeyEvent);\n    }\n  }\n\n  /**\n   * Called when the trigger element receives a mouseleave event. Fades out the background.\n   */\n  private _mouseLeave(event: MouseEvent) {\n    // We can always fade out the background here; It's a no-op if it was already inactive.\n    this._rippleRenderer.fadeOutRippleBackground();\n  }\n\n  // TODO: Reactivate the background div if the user drags out and back in.\n}\n\n\n@NgModule({\n  exports: [MdRipple],\n  declarations: [MdRipple],\n})\nexport class MdRippleModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: MdRippleModule,\n      providers: []\n    };\n  }\n}\n"],"sourceRoot":"/source/"}